import{m as d,p as v,b as y}from"./positioning-049a9b89.js";import{_ as M,u as S,b,d as k,e as z,o as C,c as A,a as B,f as h,n as E,g as p}from"./index-a152579d.js";const I=()=>{function w(e,o,_,r=!0){let l=(e-e%o)/o,u=l%2,c=u*2-1,a=[e-o,e+c,e+o,e+o-c,e-c,e-o-c];return r?(u===1&&e===l*o||u===0&&e===(l+1)*o-1?a=a.slice(0,3):(u===1&&e===(l+1)*o-1||u===0&&e===l*o)&&(a=[a[0],...a.slice(2)]),a.filter(f=>f>=0&&f<_)):a}function m(e,o){let r=(e-e%o)/o%2;return[e-o-r,e-1,e+o-r,e+o-r+1,e+1,e-o-r+1]}return{around:w,around2:m}};const N={__name:"map_exit",setup(w){const m=S(),{around2:e}=I();console.log(e(1921,63));const{checkerboardSize:o}=d(),{coordinate:_,mousedown:r,mousemove:l,mouseup:u}=v(),{tileCodeString:c}=b("map",["tileCodeString"]);let a=k(()=>`${o.value}${_.value}`);return z(()=>{m.commit("map/replaceAll",["long",63]),m.dispatch("map/edit_initialization"),m.commit("map/reviseArray",["tileCodeString",1985,"M"]);let f=[{new:1921,old:1985},{new:2047,old:1985},{new:1986,old:1985}],s=[];setInterval(()=>{f.forEach(t=>{m.commit("map/reviseArray",["tileCodeString",t.new,"M"]);let n=e(t.new,63),i=n.indexOf(t.old);s.push({new:n[(i+2)%6],old:t.new}),s.push({new:n[(i+4)%6],old:t.new})}),s.sort((t,n)=>t.new-n.new);for(let t=s.length-1;t>0;t--)if(s[t].new===s[t-1].new)s.splice(t,1),s.splice(t-1,1),t--;else{let n=e(s[t].new,63);for(let i=0;i<6;i++)if(s[t].old!==n[i]&&c.value[n[i]]==="M"){s.splice(t,1);break}}f=[...s],s=[]},1e3)}),(f,s)=>(C(),A("div",{class:"outermost_layer",onMousedown:s[0]||(s[0]=(...t)=>p(r)&&p(r)(...t)),onMousemove:s[1]||(s[1]=(...t)=>p(l)&&p(l)(...t)),onMouseup:s[2]||(s[2]=(...t)=>p(u)&&p(u)(...t))},[B("div",{class:"checkerboard",style:E(p(a))},[h(y)],4)],32))}},$=M(N,[["__scopeId","data-v-f478d819"]]);export{$ as default};
