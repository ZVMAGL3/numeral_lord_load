import{b as w,d as b,_ as M,m as B,e as G,g as s,o as m,c as g,n as R,l as F,u as X,F as U,i as P,a as W,q as H,f as J,t as L,s as D}from"./index-934279e6.js";const K="data:image/png;base64,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";function C(){const{tileCodeString:p,long:l,specialForces:h,combatUnitAll:u}=w("map",["tileCodeString","long","specialForces","combatUnitAll"]),n=41.5,t=1.7320508075688772,a=b(()=>p.value.length),A=b(()=>Math.ceil(a.value/l.value)),v=b(()=>`min-height:${n/2+n*1.5*A.value}px;min-width:${n/2*t*(l.value*2+1)}px;`),d=b(()=>[(n/2+n*1.5*A.value)*.5,n/2*t*(l.value*2+1)*.5]);function E(i){const r=i%l.value,o=Math.floor(i/l.value);return[2+n*1.5*o,2+n/2*t*(r*2+(o+1)%2),40*Math.sqrt(3),40*2]}function N(i){const[r,o,e,c]=E(i);return`top:${r}px;left:${o}px;width:${e}px;height:${c}px;`}const Q=b(()=>i=>`${h.value.has(i)?"font-size: 20px;":""}${u.value.has(i)?"color: aliceblue;":""}`);function k(i,r){const o=n/2*t,e=n*1.5,c=Math.floor(r/e);let T=Math.floor(i/o);if(r%e<n/2){let Y=[[Math.floor((T-c%2)/2),c-1],[Math.floor((T-(c+1)%2)/2),c]],x=((T+c)%2*-2+1)*t/3,y=c*e+1-(T+(T+c)%2)*o*x,S=r-i*x;return f(Y[y<S?1:0])}else{let Y=[Math.floor((T-(c+1)%2)/2),c];return f(Y)}}function f(i){const[r,o]=i,e=o*l.value+r;return r>=0&&o>=0&&r<l.value&&e<a.value?e:!1}return{checkerboardSize:v,getTileStyle:N,frameSize:d,getTileIndexFromWindowCoords:k,spanStyle:Q}}const _=["src"],I={__name:"aperture",props:{chessman:{type:[Object,Boolean,String,Number,Array]},index:{type:Number}},setup(p){const l=p,{combatUnit:h,specialForces:u,process:n}=w("map",["combatUnit","specialForces","process"]);let t=B(0),a=b(()=>{let v=(t.value-10)/10;return .7-(v>0?v:0)}),A=b(()=>`opacity:${a.value};width:${(t.value*6+10)*(u.value.has(l.index)?.75:1)}%`);return G(()=>{setInterval(()=>{t.value=(t.value+1)%20},50)}),(v,d)=>p.chessman&&s(h).has(p.index)&&!s(n)?(m(),g("img",{key:0,class:"aperture",src:"../../../public/numberGame/Sprite/Ripple.png",style:R(s(A))},null,12,_)):F("",!0)}},Z=M(I,[["__scopeId","data-v-3e3d9c12"]]);const j=["src"],O=["src"],z=["src"],V=["onClick"],q={__name:"battlefield",setup(p){const l=X(),{soldiers:h,tileCodeString:u,selected:n,specialForces:t,process:a,player_ico:A,actioning:v}=w("map",["soldiers","tileCodeString","selected","specialForces","process","player_ico","actioning"]),d={P:"../../public/numberGame/Sprite/TS_Mountain.png",S:"../../public/numberGame/Sprite/TS_Stronghold.png",M:"../../public/numberGame/Sprite/TS0.png",O:"../../public/numberGame/Sprite/TS_Water.png",V:""},{checkerboardSize:E,getTileStyle:N,getTileIndexFromWindowCoords:Q,spanStyle:k}=C();function f(i){const r=i.target.getBoundingClientRect(),o=i.clientX-r.left,e=i.clientY-r.top;let c=Q(o,e);c!==!1&&(a.value?l.dispatch("map/bonusEvent",c):l.dispatch("map/selectedEvent",c))}return(i,r)=>(m(),g("div",{class:"chessboard",style:R(s(E))},[(m(!0),g(U,null,P(s(h),(o,e)=>(m(),g("div",{key:e,class:"cell",style:R(s(N)(e))},[d[s(u)[e]]?(m(),g("img",{key:0,class:"chessman",src:s(u)[e]!=="S"?d[s(u)[e]]:d.M},null,8,j)):F("",!0),o.dots>0?(m(),g("img",{key:1,class:"chessman",src:`../../../public/numberGame/Sprite/${s(A)[o.contingent]}`,style:R(s(t).has(e)?"height:60px;":"")},null,12,O)):F("",!0),d[s(u)[e]]&&s(u)[e]==="S"?(m(),g("img",{key:2,class:"chessman",src:d[s(u)[e]]},null,8,z)):F("",!0),J(Z,{chessman:o,index:e},null,8,["chessman","index"]),o.dots>1||s(t).has(e)?(m(),g("span",{key:3,style:R(s(k)(e))},L(o.dots),5)):F("",!0)],4))),128)),s(n).length&&!s(t).has(s(n)[0])?(m(),g("img",{key:0,class:"selected",src:K,style:R(s(N)(s(n)[0]))},null,4)):F("",!0),W("div",{class:"operationsLayer",onClick:H(f,["stop"])},null,8,V)],4))}},ee=M(q,[["__scopeId","data-v-34df6486"]]);const te=()=>{let p=!1,l=0,h=0,u=window.innerWidth/2,n=window.innerHeight/2,t=B(0),a=B(0),A=0,v=0;const{frameSize:d}=C();let E=window.innerWidth,N=window.innerHeight;const Q=b(()=>(k(),`transform: translate(-50%, -50%) translate(${t.value}px, ${a.value}px);`));function k(){t.value=d.value[0]<Math.abs(t.value)?d.value[0]*(t.value/Math.abs(t.value)):t.value,a.value=d.value[1]<Math.abs(a.value)?d.value[1]*(a.value/Math.abs(a.value)):a.value}function f(e){p=!0,u=e.clientX,n=e.clientY}function i(e){p&&(t.value+=e.clientX-u,a.value+=e.clientY-n,u=e.clientX,n=e.clientY)}function r(){p=!1}function o(e){l=e.clientX,h=e.clientY,A=l-t.value-window.innerWidth/2,v=h-a.value-window.innerHeight/2}return G(()=>{window.addEventListener("mousemove",o),window.onresize=()=>{l=window.innerWidth/E*l,h=window.innerHeight/N*h,E=window.innerWidth,N=window.innerHeight,t.value=l-A-window.innerWidth/2,a.value=h-v-window.innerHeight/2,k(),A=l-t.value-window.innerWidth/2,v=h-a.value-window.innerHeight/2}}),D(()=>{window.removeEventListener("mousemove",o),window.onresize=null}),{coordinate:Q,mousedown:f,mousemove:i,mouseup:r}};export{ee as b,C as m,te as p};
